<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PBM Breaks - PokÃ©mon League Store</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0a0a15;
            --surface: #12121f;
            --card: #1a1a2e;
            --accent: #00eeff;
            --electric: #00ff9d;
            --purple: #9d4edd;
            --text: #ffffff;
            --text2: #e0e0ff;
        }

        * { margin:0; padding:0; box-sizing:border-box; }

        html, body {
            height: 100%;
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--text);
            overflow-x: hidden;
        }

        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(0,238,255,0.14) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(157,78,221,0.12) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(0,255,157,0.07) 0%, transparent 70%);
        }

        .orb {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle, var(--accent), transparent);
            opacity: 0.2;
            pointer-events: none;
            filter: blur(35px);
        }
        .orb:nth-child(1){width:700px;height:700px;top:-15%;left:-10%;}
        .orb:nth-child(2){width:900px;height:900px;bottom:-25%;right:-20%;}
        .orb:nth-child(3){width:600px;height:600px;top:20%;right:5%;}

        /* SUICUNE HERO - Perfect on all screens */
        .suicune-hero {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80vw;
            max-width: 700px;
            opacity: 0.25;
            filter: drop-shadow(0 0 70px var(--accent)) brightness(1.3);
            pointer-events: none;
            z-index: 1;
            animation: suicuneFloat 22s infinite ease-in-out;
        }
        @keyframes suicuneFloat {
            0%,100% { transform: translate(-50%, -50%) translateY(0); }
            50% { transform: translate(-50%, -50%) translateY(-25px); }
        }

        header {
            position: relative;
            text-align: center;
            padding: 6rem 1.5rem 7rem;
            z-index: 2;
        }

        .header-logo {
            width: 200px;
            filter: drop-shadow(0 0 60px var(--accent));
            animation: levitate 7s infinite ease-in-out;
        }
        @keyframes levitate { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-25px); } }

        h1 {
            font-size: 7.5rem;
            font-weight: 900;
            letter-spacing: -6px;
            background: linear-gradient(90deg, #00eeff, #ffffff, #ff00ff);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 110px rgba(0,238,255,0.85);
            margin-top: 2rem;
        }

        main {
            flex: 1;
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 1.5rem 6rem;
            position: relative;
            z-index: 2;
        }

        .store-intro {
            text-align: center;
            padding: 5rem 2.5rem;
            margin-bottom: 6rem;
            background: linear-gradient(135deg, rgba(26,26,46,0.94), rgba(18,18,31,0.99));
            border-radius: 48px;
            border: 3px solid rgba(0,238,255,0.5);
            box-shadow: 0 35px 120px rgba(0,0,0,0.8);
            backdrop-filter: blur(18px);
        }
        .store-intro h2 {
            font-size: 4.8rem;
            font-weight: 900;
            background: linear-gradient(120deg, var(--electric), var(--accent), var(--purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1.2rem;
        }
        .store-intro p { font-size: 1.5rem; color: var(--text2); max-width: 950px; margin: 0 auto; line-height: 2; }

        .youtube-section { margin: 8rem 0; }
        .youtube-title {
            font-size: 5.5rem;
            font-weight: 900;
            text-align: center;
            margin-bottom: 4.5rem;
            background: linear-gradient(90deg, #ff0080, #00eeff, #00ff9d, #ff00ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 80px rgba(0,238,255,0.9);
        }
        .youtube-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 3.2rem;
            padding: 2.5rem;
            background: rgba(18,18,31,0.65);
            border-radius: 48px;
            border: 2px solid rgba(0,238,255,0.35);
            box-shadow: 0 30px 100px rgba(0,0,0,0.7);
        }
        .yt-video {
            position: relative;
            border-radius: 36px;
            overflow: hidden;
            background: var(--card);
            border: 2.5px solid transparent;
            transition: all 0.5s ease;
            box-shadow: 0 25px 60px rgba(0,0,0,0.6);
            cursor: pointer;
        }
        .yt-video:hover { transform: translateY(-28px) scale(1.06); border-color: var(--accent); box-shadow: 0 50px 120px rgba(0,238,255,0.5); }
        .yt-thumb { width: 100%; height: 250px; object-fit: cover; display: block; }
        .play-button {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 90px; height: 90px;
            background: rgba(0,0,0,0.8);
            border: 6px solid white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 42px;
            color: white;
            transition: all 0.35s;
        }
        .yt-video:hover .play-button { transform: translate(-50%, -50%) scale(1.3); background: var(--accent); }
        .yt-overlay { position: absolute; bottom: 0; left: 0; right: 0; padding: 2.2rem 1.6rem 1.6rem; background: linear-gradient(to top, rgba(10,10,21,0.97), transparent); }
        .yt-title { font-size: 1.35rem; font-weight: 800; color: var(--text); line-height: 1.5; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .upcoming-badge {
            position: absolute; top: 22px; left: 22px;
            background: linear-gradient(135deg, #ff006e, #ff8c00);
            color: white; padding: 0.7rem 1.6rem;
            border-radius: 50px; font-weight: 900; font-size: 1rem;
            box-shadow: 0 0 50px rgba(255,0,110,0.9);
            animation: badgePulse 2s infinite;
        }
        .live-now { background: linear-gradient(90deg, #ff0000, #ff0066) !important; animation: livePulse 1.5s infinite !important; }
        @keyframes badgePulse { 0%,100% { transform: scale(1); } 50% { transform: scale(1.12); } }
        @keyframes livePulse { 0%,100% { box-shadow: 0 0 35px #ff0000; } 50% { box-shadow: 0 0 80px #ff0000; } }

        .store-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 3.2rem; margin-top: 5rem; }
        .item-card { background: var(--card); border-radius: 38px; overflow: hidden; border: 2px solid rgba(0,238,255,0.3); transition: all 0.5s ease; box-shadow: 0 25px 65px rgba(0,0,0,0.6); display: flex; flex-direction: column; }
        .item-card:hover { transform: translateY(-25px) scale(1.05); border-color: var(--accent); box-shadow: 0 50px 130px rgba(0,238,255,0.45); }
        .item-image { width: 100%; height: 310px; object-fit: cover; transition: transform 0.7s ease; }
        .item-card:hover .item-image { transform: scale(1.16); }
        .card-content { padding: 2.5rem; background: linear-gradient(to top, var(--surface), transparent); flex-grow: 1; display: flex; flex-direction: column; }
        .item-card h3 { font-size: 2.2rem; font-weight: 800; background: linear-gradient(90deg, var(--accent), #fff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 1.1rem; }
        .description { color: var(--text2); margin-bottom: 1.8rem; line-height: 1.9; flex-grow: 1; }
        .item-details { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; padding-top: 1.2rem; border-top: 1.5px solid rgba(0,238,255,0.3); }
        .item-price { font-size: 2.9rem; font-weight: 900; color: var(--electric); text-shadow: 0 0 40px rgba(0,255,157,0.7); }
        .item-stock { background: rgba(0,238,255,0.25); color: var(--accent); padding: 0.8rem 1.4rem; border-radius: 50px; font-weight: 700; border: 2px solid var(--accent); }
        .action-button, .out-of-stock { width: 100%; padding: 1.6rem; text-align: center; border-radius: 28px; font-size: 1.5rem; font-weight: 800; margin-top: auto; }
        .action-button { background: linear-gradient cac(135deg, var(--accent), var(--purple)); color: white; text-decoration: none; box-shadow: 0 18px 50px rgba(0,238,255,0.55); transition: all 0.4s; }
        .action-button:hover { transform: translateY(-8px); box-shadow: 0 32px 80px rgba(0,238,255,0.75); background: linear-gradient(135deg, #00ffff, #d946ef); }
        .out-of-stock { background: rgba(255,77,77,0.3); color: #ff6b6b; border: 3px solid #ff4444; }

        footer {
            margin-top: auto;
            padding: 2.5rem 1rem;
            text-align: center;
            color: #777;
            background: rgba(10,10,21,0.99);
            border-top: 1.5px solid rgba(0,238,255,0.25);
            font-size: 0.95rem;
        }
        footer p:last-child { font-size: 0.82rem; color: #555; margin-top: 0.5rem; }

        /* === PERFECT MOBILE RESPONSIVENESS === */
        @media (max-width: 768px) {
            .suicune-hero { width: 90vw; max-width: 500px; opacity: 0.2; }

            header { padding: 3rem 1rem 3.5rem; }
            .header-logo { width: 130px; }
            h1 { font-size: 4.2rem; letter-spacing: -2px; margin-top: 1rem; }

            .store-intro { padding: 3rem 1.8rem; margin-bottom: 4rem; border-radius: 36px; }
            .store-intro h2 { font-size: 3.2rem; }
            .store-intro p { font-size: 1.2rem; line-height: 1.8; }

            .youtube-section { margin: 5rem 0; }
            .youtube-title { font-size: 3.4rem; margin-bottom: 2.8rem; }
            .youtube-grid { grid-template-columns: 1fr; gap: 2.2rem; padding: 1.8rem; border-radius: 36px; }
            .yt-thumb { height: 210px; }
            .play-button { width: 70px; height: 70px; font-size: 34px; }

            .store-container { grid-template-columns: 1fr; gap: 2.8rem; margin-top: 3.5rem; }
            .item-image { height: 260px; }
            .card-content { padding: 2rem; }
            .item-card h3 { font-size: 1.9rem; }
            .item-price { font-size: 2.4rem; }
            .action-button, .out-of-stock { padding: 1.4rem; font-size: 1.4rem; }
        }

        @media (max-width: 480px) {
            h1 { font-size: 3.6rem; }
            .header-logo { width: 110px; }
            .store-intro h2 { font-size: 2.8rem; }
            .youtube-title { font-size: 3rem; }
            .yt-thumb { height: 190px; }
            .item-image { height: 220px; }
            .item-card h3 { font-size: 1.7rem; }
            .item-price { font-size: 2.2rem; }
        }
    </style>
</head>
<body>

    <div class="orb"></div><div class="orb"></div><div class="orb"></div>

    <img src="https://assets.pokemon.com/assets/cms2/img/pokedex/full/245.png" alt="Suicune" class="suicune-hero" loading="lazy">

    <header>
        <img src="https://assets.pokemon.com/assets/cms2/img/pokedex/full/245.png" alt="Suicune Logo" class="header-logo" loading="lazy">
        <h1>PBM BREAKS</h1>
    </header>

    <main>
        <div class="store-intro">
            <h2>Welcome to PBM Breaks!</h2>
            <p>Get ready for live TCG pack openings and curated breaks with Pokeballer Mike! We're live on YouTube, offering exclusive bundles and the thrill of the hunt. Grab your spot and let's pull some rare cards!</p>
        </div>

        <section class="youtube-section">
            <h2 class="youtube-title">LIVE BREAKS ON YOUTUBE</h2>
            <div class="youtube-grid" id="youtube-videos"></div>
        </section>

        <div id="store-content" class="store-container"></div>
    </main>

    <footer>
        <p>Â© 2025 PBM Breaks. All Rights Reserved.</p>
        <p>Not affiliated with Nintendo or The PokÃ©mon Company</p>
    </footer>

    <div id="lightbox-overlay"><img id="lightbox-image" src="" alt=""></div>

    <script>
        const API_URL = 'https://pokeballer-worker.kronborgnielsen.workers.dev/api';
        const CHANNEL_ID = "UCdFYy9uChCNAWbvVhTYwHaQ";

        async function loadItems() {
            const container = document.getElementById('store-content');
            container.innerHTML = '<div style="grid-column:1/-1;text-align:center;padding:5rem;color:var(--accent);font-size:2.2rem;">Loading Breaks...</div>';
            try {
                const res = await fetch(`${API_URL}/items`);
                const items = await res.json();
                container.innerHTML = '';
                if (!items.length) { container.innerHTML = '<p style="grid-column:1/-1;text-align:center;color:#aaa;font-size:1.7rem;">No active breaks â€” next one soon!</p>'; return; }
                items.forEach((item, i) => {
                    const card = document.createElement('div');
                    card.className = 'item-card';
                    const img = item.image || 'https://assets.pokemon.com/assets/cms2/img/misc/trading-card-games/cards/tcg_default_card.png';
                    const btn = item.stock > 0 && item.googleFormLink ? `<a href="${item.googleFormLink}" target="_blank" class="action-button">JOIN BREAK!</a>` : `<div class="out-of-stock">SOLD OUT</div>`;
                    card.innerHTML = `<img src="${img}" alt="${item.name}" class="item-image" loading="lazy"><div class="card-content"><h3>${item.name}</h3><p class="description">${item.description}</p><div class="item-details"><span class="item-price">$${item.price.toFixed(2)}</span><span class="item-stock">Spots: ${item.stock}</span></div>${btn}</div>`;
                    container.appendChild(card);
                });
            } catch { container.innerHTML = '<p style="grid-column:1/-1;color:#ff4444;text-align:center;">Failed to load â€” refresh!</p>'; }
        }

        async function loadYouTubeVideos() {
            const container = document.getElementById('youtube-videos');
            container.innerHTML = '<div style="grid-column:1/-1;padding:5rem;color:var(--accent);font-size:1.8rem;">Loading latest videos...</div>';

            const proxies = ['https://api.allorigins.ml/raw?url=', 'https://corsproxy.io/?', 'https://thingproxy.freeboard.io/fetch/'];
            let success = false;

            for (let proxy of proxies) {
                try {
                    const url = `${proxy}${encodeURIComponent('https://www.youtube.com/feeds/videos.xml?channel_id=' + CHANNEL_ID)}`;
                    const xmlText = await (await fetch(url)).text();
                    const xml = new DOMParser().parseFromString(xmlText, "application/xml");
                    if (xml.querySelector("parsererror")) continue;

                    const entries = Array.from(xml.querySelectorAll("entry")).slice(0, 6);
                    container.innerHTML = '';
                    let count = 0;

                    for (let entry of entries) {
                        if (count >= 3) break;
                        const videoId = entry.querySelector("yt\\:videoId, videoId")?.textContent;
                        if (!videoId) continue;
                        const title = entry.querySelector("title")?.textContent || "Untitled";
                        const isLive = title.toLowerCase().includes("live") || title.includes("ðŸ”´");
                        const isUpcoming = title.toLowerCase().includes("premiere") || title.toLowerCase().includes("scheduled");

                        const thumb = `https://i.ytimg.com/vi/${videoId}/maxresdefault.jpg`;

                        const card = document.createElement('div');
                        card.className = 'yt-video';
                        card.onclick = () => window.open(`https://www.youtube.com/watch?v=${videoId}`, '_blank');
                        card.innerHTML = `
                            <img src="${thumb}" alt="${title}" class="yt-thumb" loading="lazy">
                            <div class="play-button">â–¶</div>
                            ${(isLive || isUpcoming) ? `<div class="upcoming-badge ${isLive?'live-now':''}">${isLive?'LIVE NOW':'UPCOMING'}</div>` : ''}
                            <div class="yt-overlay"><div class="yt-title">${title}</div></div>
                        `;
                        container.appendChild(card);
                        count++;
                    }
                    if (count > 0) { success = true; break; }
                } catch (e) {}
            }

            if (!success) {
                container.innerHTML = `<div style="grid-column:1/-1;padding:4rem;text-align:center;"><a href="https://www.youtube.com/@pokeballermike" target="_blank" style="color:var(--accent);font-size:1.6rem;font-weight:800;text-decoration:underline;">Watch @pokeballermike â†’</a></div>`;
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadItems();
            loadYouTubeVideos();

            const overlay = document.getElementById('lightbox-overlay');
            const img = document.getElementById('lightbox-image');
            document.getElementById('store-content').addEventListener('click', e => {
                if (e.target.classList.contains('item-image')) { img.src = e.target.src; overlay.classList.add('show'); }
            });
            overlay.addEventListener('click', () => { overlay.classList.remove('show'); setTimeout(() => img.src = '', 300); });
        });
    </script>
</body>
</html>
